from parsel import Selector
import requests


# URL_BASE = "http://books.toscrape.com/catalogue/"
# Define a primeira p√°gina como pr√≥xima a ter seu conte√∫do recuperado
# next_page_url = 'page-1.html'
# while next_page_url:
    # Busca o conte√∫do da pr√≥xima p√°gina
    # response = requests.get(URL_BASE + next_page_url)
    # selector = Selector(text=response.text)
    # Imprime os produtos de uma determinada p√°gina
    # for product in selector.css(".product_pod"):
        # Busca e extrai o t√≠tulo e  o pre√ßo
        # title = product.css("h3 a::attr(title)").get()
        price = product.css(".product_price .price_color::text").re(r"¬£\d+\.\d{2}")
        # print(title, price)

        # Busca o detalhe de um produto
        # detail_href = product.css("h3 a::attr(href)").get()
        # detail_page_url = URL_BASE + detail_href

        # Baixa o conte√∫do da p√°gina de detalhes
        # detail_response = requests.get(detail_page_url)
        # detail_selector = Selector(text=detail_response.text)

        # Extrai a descri√ß√£o do produto
        # description = detail_selector.css("#product_description ~ p::text").get()
        suffix = "...more"
        if description.endswith(suffix):
            description = description[:-len(suffix)]
        # print(description)

    # Descobre qual √© a pr√≥xima p√°gina
    # next_page_url = selector.css(".next a::attr(href)").get()

    # üëÄ De olho na dica: Strings em Python possuem v√°rios 
    # m√©todos para ajudarem nesta limpeza, como por exemplo, 
    # o strip. Para ler a documenta√ß√£o e procurar
    # esses m√©todos, execute help(str) no seu terminal interativo.
